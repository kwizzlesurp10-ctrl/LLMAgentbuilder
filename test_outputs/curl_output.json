{"status":"success","message":"Agent generated successfully","code":"import anthropic\nimport os\nfrom typing import Optional, List, Dict, Any\n\nimport sqlite3\n\n\n\nclass ApiBot:\n    def __init__(self, api_key):\n        \n        from huggingface_hub import InferenceClient\n        self.client = InferenceClient(token=api_key)\n        self.model = \"meta-llama/Meta-Llama-3-8B-Instruct\"\n        \n        self.prompt = \"You are a bot.\"\n        \n        \n        self.db_path = \"workflow.db\"\n        self.prompt += \"\\n\\nYou have access to a SQLite database. You can query it using the 'query_database' tool.\"\n        # Add database tool definition\n        db_tool = {\n            \"name\": \"query_database\",\n            \"description\": \"Execute a SQL query against the SQLite database. Use this to retrieve information.\",\n            \"input_schema\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"query\": {\n                        \"type\": \"string\",\n                        \"description\": \"The SQL query to execute\"\n                    }\n                },\n                \"required\": [\"query\"]\n            }\n        }\n        if not hasattr(self, 'tools'):\n            self.tools = []\n        self.tools.append(db_tool)\n        \n\n    \n\n    \n    def query_database(self, query: str) -> Dict[str, Any]:\n        \"\"\"Execute a SQL query against the database.\"\"\"\n        try:\n            conn = sqlite3.connect(self.db_path)\n            conn.row_factory = sqlite3.Row\n            cursor = conn.cursor()\n            cursor.execute(query)\n            results = [dict(row) for row in cursor.fetchall()]\n            conn.close()\n            return {\"status\": \"success\", \"results\": results}\n        except Exception as e:\n            return {\"status\": \"error\", \"message\": str(e)}\n    \n\n    \n\n    def run(self, task: str):\n        \n        \n        \n        messages = [{\"role\": \"system\", \"content\": self.prompt}, {\"role\": \"user\", \"content\": task}]\n        response = self.client.chat_completion(\n            model=self.model,\n            messages=messages,\n            max_tokens=2048,\n            stream=False\n        )\n        # Note: Tool calling with HF InferenceClient is model-dependent and may require different handling.\n        # For this implementation, we'll focus on text generation.\n        return response.choices[0].message.content\n        \n\nif __name__ == '__main__':\n    import os\n    import argparse\n    from dotenv import load_dotenv\n\n    load_dotenv()\n\n    # Parse command line arguments\n    parser = argparse.ArgumentParser(description=\"Run the ApiBot agent.\")\n    parser.add_argument(\"--task\", default=\"Query the DB.\", help=\"The task to be performed by the agent\")\n    args = parser.parse_args()\n\n    # Ensure API key is set\n    api_key = os.environ.get(\"ANTHROPIC_API_KEY\") or os.environ.get(\"HUGGINGFACEHUB_API_TOKEN\")\n    if not api_key:\n        raise ValueError(\"API key not found. Please set ANTHROPIC_API_KEY or HUGGINGFACEHUB_API_TOKEN.\")\n\n    try:\n        agent = ApiBot(api_key=api_key)\n        print(f\"Running ApiBot with task: {args.task}\\n\")\n        result = agent.run(args.task)\n        print(\"Response:\")\n        print(\"-\" * 50)\n        print(result)\n        print(\"-\" * 50)\n    except Exception as e:\n        print(f\"Error running agent: {e}\")","filename":"apibot.py"}